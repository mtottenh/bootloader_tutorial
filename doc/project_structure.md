

```

                                             +------------------------------+
                                             |                              |
                                             |          BIOS loader         |
 +-------------------+                       |          (./i386)            |
 |                   |                       +------------------------------+
 |  initial loader   +----------+------------>                              |
 | (src/kernel/boot) |          |            |       +--------------+       |
 +---------+---------+          |            |       |   Stage 1    |       |
           |                    |            |       |  (stage1.s)  |       |
           |                    |            |       +------+-------+       |
           |                    |            |              |               |
+----------v----------+         |            |       +------v-------+       |
|   Bootloader core   |         |            |       |   Stage 1.5  |       |
|(src/kernel/kernel.c)|         |            |       | (stage1_5.s) |       |
|                     |         |            |       +--------------+       |
+---------------------+         |            +------------------------------+
                                |                                            
                                |                                            
                                |                                            
                                |            +------------------------------+
                                |            |                              |
                                |            |           EFI loader         |
                                |            |            (./efi)           |
                                |            +------------------------------+
                                +------------>        +------------+        |
                                             |        |  efi stub  |        |
                                             |        |  (stub.c)  |        |
                                             |        +------------+        |
                                             +------------------------------+

```
